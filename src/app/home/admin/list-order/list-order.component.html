<div class="main-content">
    <!-- Ph·∫ßn danh s√°ch ƒë∆°n h√†ng -->
    <div class="content-card order-list-section">
        <div class="card-header">
            <h2>
                <span class="icon">üì¶</span>
                Danh s√°ch ƒë∆°n h√†ng
            </h2>
            <div class="subtitle">Chi ti·∫øt ƒë∆°n h√†ng v·∫≠n chuy·ªÉn</div>
        </div>

        <div class="filter-controls">
            <div class="filter-row">
                <div class="filter-group">
                    <label>T·ª´ ng√†y</label>
                    <input type="date" class="filter-input" name="fromDateStr" [(ngModel)]="fromDateStr">
                </div>
                <div class="filter-group">
                    <label>ƒê·∫øn ng√†y</label>
                    <input type="date" class="filter-input" name="toDateStr" [(ngModel)]="toDateStr">
                </div>
                <div class="filter-group">
                    <label>T√¨m ki·∫øm</label>
                    <input type="text" class="filter-input" placeholder="ID ƒë∆°n,container,Rmooc,ƒë·ªãa ƒëi·ªÉm"
                        name="keySearch" [(ngModel)]="keySearch">
                </div>

                <div class="filter-group">
                    <label>Tr·∫°ng th√°i</label>
                    <select class="filter-select" [(ngModel)]="status" (change)="sortStatus($event)">
                        <option value="">T·∫•t c·∫£ ƒë∆°n h√†ng</option>
                        <option value="Pending">ƒêang ch·ªù</option>
                        <option value="InProgress">ƒêang x·ª≠ l√≠</option>
                        <option value="PickedUp">ƒê√£ l·∫•y h√†ng</option>
                        <option value="InTransit">ƒêang v·∫≠n chuy·ªÉn</option>
                        <option value="Delivered">ƒê√£ giao</option>
                        <option value="AwaitingApproval">Ch·ªù ph√™ duy·ªát</option>
                        <option value="Completed">Ho√†n th√†nh</option>
                        <option value="Cancelled">ƒê√£ h·ªßy</option>
                        <option value="FailedDelivery">Giao th·∫•t b·∫°i</option>
                    </select>
                </div>
                <div class="filter-group">
                    <button type="button" (click)="searchObject()" class="btn-view-detail">T√¨m ki·∫øm</button>
                </div>
                <div class="filter-group">
                    <button type="button" (click)="ExportOrders('csv')" class="btn-view-detail">Xu·∫•t Excel</button>
                </div>
                <div class="filter-group">
                    <label>Show Entries</label>
                    <select class="filter-select" (change)="showEntries($event)">
                        <option value="30">M·∫∑c ƒë·ªãnh ( 30 ƒë∆°n h√†ng)</option>
                        <option value="37">37 ƒë∆°n h√†ng</option>
                        <option value="45">45 ƒë∆°n h√†ng</option>
                        <option value="60">60 ƒë∆°n h√†ng</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>L·ªçc danh s√°ch t√¨m ki·∫øm</label>
                    <select class="filter-select" (change)="sortData($event)">
                        <option value="id-asc">Ng√†y giao c≈© nh·∫•t (M·∫∑c ƒë·ªãnh)</option>
                        <option value="id-desc">Ng√†y giao m·ªõi nh·∫•t </option>
                        <!-- <option value="price-asc">Gi√° th·∫•p ƒë·∫øn cao</option>
                        <option value="price-desc">Gi√° cao ƒë·∫øn th·∫•p</option> -->
                    </select>
                </div>
                
            </div>
        </div>
        

        <div class="table-container" >
            <table class="orders-table" *ngIf="listOrder.length > 0; else other_content">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Ng√†y giao h√†ng</th>
                        <th>T√™n kh√°ch h√†ng</th>
                        <th>BillBooking</th>
                        <th>C·∫£ng nh·∫≠n Cont/R·ªëng/h√†ng</th>
                        <th>Kho nh·∫≠n h√†ng/Kho giao h√†ng</th>
                        <th>C·∫£ng h·∫° Cont/C·∫£ng tr·∫£ Cont</th>
                        <th>T√™n t√†i x·∫ø</th>
                        <th>S·ªë xe</th>
                        <th>S·ªë Rmooc</th>
                        <th>S·ªë Container</th>
                        <th>Tr·∫°ng th√°i</th>
                        <th>Chi ti·∫øt</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let order of listOrder">
                        <td data-label="ID">{{order.orderID}}</td>
                        <td data-label="Ng√†y nh·∫≠p">{{order.orderDate | stringDateFormatPipe:'dd/MM/yyyy' }}</td>
                        <td data-label="T√™n kh√°ch h√†ng">{{order.customerName}}</td>
                        <td data-label="BillBookingNo ">{{order.billBookingNo}}</td>
                        <td data-label="C·∫£ng nh·∫≠n">{{order.fromLocationName}}</td>
                        <td data-label="Kho nh·∫≠n/giao">{{order.fromWhereName}}</td>
                        <td data-label="C·∫£ng h·∫°">{{order.toLocationName}}</td>
                        <td data-label="T√™n t√†i x·∫ø">{{order.driverName}}</td>
                        <td data-label="S·ªë xe">{{order.truckNo}}</td>
                        <td data-label="S·ªë Rmooc">{{order.rmoocNo}}</td>
                        <td data-label="Chi ph√≠">{{order.containerNo}}</td>
                        <td data-label="Tr·∫°ng th√°i"><span class="status-badge status-processing">{{order.status}}</span></td>
                        <td data-label="Chi ti·∫øt"><button type="button" (click)="DetailOrder(order.orderID)" class="btn-detail">Xem</button></td>
                    </tr>

                </tbody>
            </table>
            <ng-template #other_content>Danh s√°ch r·ªóng</ng-template>
        </div>

    </div>
</div>



<div class="pagination-container pagination-fade-in">
    <!-- Info Text -->
    <div class="pagination-info">
        T·ªïng <strong> {{listOrderLength}} </strong> <strong></strong> ƒë∆°n h√†ng
    </div>

    <!-- Pagination Controls -->
    <div class="pagination-controls">
        <!-- Previous Button -->
        <button class="pagination-btn nav-btn prev" [disabled]="pageNumber === 1" (click)="changePage(pageNumber - 1)">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd"
                    d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
                    clip-rule="evenodd" />
            </svg>
            Tr∆∞·ªõc
        </button>

        <!-- Page Numbers -->
        <button class="pagination-btn" [class.active]="pageNumber === 1" (click)="changePage(1)">1</button>
        <button class="pagination-btn" [class.active]="pageNumber === 2" (click)="changePage(2)">2</button>
        <button class="pagination-btn" [class.active]="pageNumber === 3" (click)="changePage(3)">3</button>
        <button class="pagination-btn mobile-hidden" [class.active]="pageNumber === 4"
            (click)="changePage(4)">4</button>
        <button class="pagination-btn mobile-hidden" [class.active]="pageNumber === 5"
            (click)="changePage(5)">5</button>

        <!-- Ellipsis -->
        <span class="pagination-ellipsis mobile-hidden">...</span>

        <!-- Last Page -->
        <button class="pagination-btn mobile-hidden" [class.active]="pageNumber === 16"
            (click)="changePage(16)">16</button>

        <!-- Next Button -->
        <button class="pagination-btn nav-btn next" [disabled]="pageNumber === 16" (click)="changePage(pageNumber + 1)">
            Sau
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd"
                    d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                    clip-rule="evenodd" />
            </svg>
        </button>
    </div>
</div>





<script>
    // Th√™m hi·ªáu ·ª©ng interactive
    document.querySelectorAll('.btn-detail').forEach(btn => {
        btn.addEventListener('click', function () {
            const row = this.closest('tr');
            const orderId = row.cells[0].textContent;
            alert(`Xem chi ti·∫øt ƒë∆°n h√†ng #${orderId}`);
        });
    });

    document.querySelector('.btn-view-detail').addEventListener('click', function () {
        const container = document.querySelector('input[placeholder="Nh·∫≠p s·ªë container"]').value;
        const fromDate = document.querySelector('input[value="2025-07-25"]').value;
        const toDate = document.querySelector('input[value="2025-08-01"]').value;
        const vehicle = document.querySelector('.filter-select').value;
        const status = document.querySelectorAll('.filter-select')[1].value;

        console.log('T√¨m ki·∫øm v·ªõi:', {
            container,
            fromDate,
            toDate,
            vehicle,
            status
        });

        // Simulate search loading
        this.textContent = 'ƒêang t√¨m...';
        this.disabled = true;

        setTimeout(() => {
            this.textContent = 'T√¨m ki·∫øm';
            this.disabled = false;
            alert('T√¨m ki·∫øm ho√†n t·∫•t!');
        }, 1500);
    });

    // Th√™m hi·ªáu ·ª©ng hover cho rows
    document.querySelectorAll('.orders-table tr').forEach(row => {
        if (row.parentNode.tagName === 'TBODY') {
            row.addEventListener('mouseenter', function () {
                this.style.transform = 'scale(1.01)';
                this.style.zIndex = '1';
            });

            row.addEventListener('mouseleave', function () {
                this.style.transform = 'scale(1)';
                this.style.zIndex = 'auto';
            });
        }
    });
</script>